[!X][!Y][!Z]((p(X,Y)->(q1(X,Y)|~q2(X,Z))) | ~p(X,Y)).

{p/r;p/v1,q1/v1,q2/v2}

<X@a;Y@b;Z@c>